apiVersion: v1
kind: ConfigMap
metadata:
  name: kristhy-medical-config
  labels:
    app: kristhy-medical
data:
  # Node environment
  NODE_ENV: "production"

  # Next.js configuration
  NEXT_TELEMETRY_DISABLED: "1"
  PORT: "3000"
  HOSTNAME: "0.0.0.0"

  # Supabase public configuration
  NEXT_PUBLIC_SUPABASE_URL: "https://xxxxx.supabase.co"
  NEXT_PUBLIC_SUPABASE_ANON_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

  # Better Auth public URL
  # Replace with your actual domain
  BETTER_AUTH_URL: "https://yourdomain.com"
  NEXT_PUBLIC_BETTER_AUTH_URL: "https://yourdomain.com"

  # Email configuration
  EMAIL_FROM: "Dra. Kristhy <noreply@yourdomain.com>"

  # Seed configuration (only used on first setup)
  SEED_DOCTOR_EMAIL: "dra@example.com"
  SEED_DOCTOR_NAME: "Dra. Kristhy"
  # Note: SEED_DOCTOR_PASSWORD should be in secrets, not configmap

---

# Optional: ConfigMap for nginx configuration (if using nginx sidecar)
apiVersion: v1
kind: ConfigMap
metadata:
  name: kristhy-medical-nginx-config
  labels:
    app: kristhy-medical
data:
  nginx.conf: |
    server {
      listen 80;
      server_name _;

      location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
      }

      location /api/health {
        proxy_pass http://localhost:3000/api/health;
        access_log off;
      }
    }
